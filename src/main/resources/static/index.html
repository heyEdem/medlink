<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedLink - Healthcare Appointment System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eeeefe',
                            100: '#d6d6fa',
                            200: '#b3b3f7',
                            300: '#8e8df2',
                            400: '#7270ea',
                            500: '#5D5CDE',
                            600: '#4340c6',
                            700: '#3432a0',
                            800: '#27267a',
                            900: '#1c1c53',
                        },
                        secondary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-in': 'slideIn 0.5s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            },
            darkMode: 'class',
        }
    </script>
    <style>
        .page {
            display: none;
        }
        .active-page {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid white;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-200 min-h-screen">
<!-- Dark mode detection -->
<script>
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.classList.add('dark');
    }
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        if (event.matches) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    });
</script>

<!-- Header -->
<header class="bg-white dark:bg-gray-800 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        <div class="flex justify-between items-center">
            <div class="flex items-center" id="logo">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M7 2a1 1 0 00-.707 1.707L7 4.414v3.758a1 1 0 01-.293.707l-4 4C.817 14.769 2.156 18 4.828 18h10.343c2.673 0 4.012-3.231 2.122-5.121l-4-4A1 1 0 0113 8.172V4.414l.707-.707A1 1 0 0013 2H7zm2 6.172V4h2v4.172a3 3 0 00.879 2.12l1.027 1.028a4 4 0 00-2.171.102l-.47.156a4 4 0 01-2.53 0l-.563-.187a1.993 1.993 0 00-.114-.035l1.063-1.063A3 3 0 009 8.172z" clip-rule="evenodd" />
                </svg>
                <h1 class="text-xl font-bold text-gray-900 dark:text-white cursor-pointer" onclick="navigateTo('login')">MedLink</h1>
            </div>
            <div id="header-auth-section">
                <div id="auth-buttons" class="flex space-x-4">
                    <button onclick="navigateTo('login')" class="text-gray-600 dark:text-gray-300 hover:text-primary-500 dark:hover:text-primary-400 transition duration-200 font-medium">Sign In</button>
                    <button onclick="navigateTo('register')" class="px-4 py-2 rounded-lg bg-primary-500 hover:bg-primary-600 text-white font-medium transition duration-200">Register</button>
                </div>
                <div id="user-menu" class="hidden">
                    <button id="user-menu-button" class="flex items-center text-gray-700 dark:text-gray-300 hover:text-primary-500 dark:hover:text-primary-400">
                        <span id="user-name" class="mr-2">User</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Main Content -->
<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Login Page -->
    <div id="login-page" class="page">
        <div class="flex flex-col md:flex-row bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg">
            <!-- Left side with branding and info -->
            <div class="md:w-1/2 bg-primary-500 p-8 flex flex-col justify-center text-white">
                <div class="max-w-md mx-auto">
                    <div class="flex items-center mb-8">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mr-3" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M7 2a1 1 0 00-.707 1.707L7 4.414v3.758a1 1 0 01-.293.707l-4 4C.817 14.769 2.156 18 4.828 18h10.343c2.673 0 4.012-3.231 2.122-5.121l-4-4A1 1 0 0113 8.172V4.414l.707-.707A1 1 0 0013 2H7zm2 6.172V4h2v4.172a3 3 0 00.879 2.12l1.027 1.028a4 4 0 00-2.171.102l-.47.156a4 4 0 01-2.53 0l-.563-.187a1.993 1.993 0 00-.114-.035l1.063-1.063A3 3 0 009 8.172z" clip-rule="evenodd" />
                        </svg>
                        <h1 class="text-3xl font-bold">MedLink</h1>
                    </div>
                    <h2 class="text-2xl font-semibold mb-4">Your Health, Your Schedule</h2>
                    <p class="mb-6 opacity-90">Book appointments with your preferred healthcare providers, manage your medical schedule, and take control of your healthcare journey.</p>
                    <div class="space-y-4">
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                            </svg>
                            <span>Easy appointment scheduling</span>
                        </div>
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                            </svg>
                            <span>Find specialists by location and specialty</span>
                        </div>
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                            </svg>
                            <span>Receive timely reminders</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right side with login form -->
            <div class="md:w-1/2 p-8 flex items-center justify-center">
                <div class="w-full max-w-md animate-slide-in">
                    <!-- Login Form -->
                    <div class="p-6">
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-6">Sign In</h2>

                        <form id="login-form">
                            <!-- Email Input -->
                            <div class="mb-4">
                                <label for="login-email" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Email Address</label>
                                <input type="email" id="login-email" name="email"
                                       class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                       placeholder="Enter your email" required>
                            </div>

                            <!-- Password Input -->
                            <div class="mb-6">
                                <div class="flex justify-between mb-2">
                                    <label for="login-password" class="text-gray-700 dark:text-gray-300 font-medium">Password</label>
                                    <a href="#" class="text-primary-500 hover:underline text-sm" onclick="navigateTo('forgot-password'); return false;">Forgot Password?</a>
                                </div>
                                <div class="relative">
                                    <input type="password" id="login-password" name="password"
                                           class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                           placeholder="Enter your password" required>
                                    <button type="button" class="toggle-password absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600 dark:text-gray-400">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 eye-icon" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                                            <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Remember Me Checkbox -->
                            <div class="flex items-center mb-6">
                                <input type="checkbox" id="remember" name="remember" class="h-4 w-4 text-primary-500 focus:ring-primary-500 border-gray-300 rounded">
                                <label for="remember" class="ml-2 block text-gray-700 dark:text-gray-300">Remember me</label>
                            </div>

                            <!-- Submit Button -->
                            <button type="submit"
                                    class="w-full bg-primary-500 hover:bg-primary-600 text-white font-bold py-3 px-4 rounded-lg transition duration-200 transform hover:translate-y-[-1px] active:translate-y-[1px]">
                                Sign In
                            </button>
                        </form>

                        <!-- Registration Link -->
                        <div class="text-center mt-6">
                            <p class="text-gray-600 dark:text-gray-400">
                                Don't have an account?
                                <a href="#" class="text-primary-500 hover:underline font-medium" onclick="navigateTo('register'); return false;">Register here</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Selection Page -->
    <div id="register-page" class="page">
        <div class="max-w-4xl mx-auto bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg animate-fade-in">
            <div class="py-8 px-8">
                <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-6 text-center">Create an Account</h2>
                <p class="text-gray-600 dark:text-gray-400 text-center mb-8">Please select the type of account you want to create</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <!-- Patient Registration Card -->
                    <div class="bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 p-6 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="navigateTo('register-patient')">
                        <div class="flex flex-col items-center text-center">
                            <div class="bg-primary-100 dark:bg-primary-900 p-4 rounded-full mb-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-2">Patient</h3>
                            <p class="text-gray-600 dark:text-gray-400 mb-4">Create an account to book appointments, manage your medical schedule, and more.</p>
                            <button class="px-6 py-2 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-lg transition duration-200">
                                Sign Up as Patient
                            </button>
                        </div>
                    </div>

                    <!-- Doctor Registration Card -->
                    <div class="bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 p-6 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="navigateTo('register-doctor')">
                        <div class="flex flex-col items-center text-center">
                            <div class="bg-secondary-100 dark:bg-secondary-900 p-4 rounded-full mb-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-secondary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-2">Healthcare Provider</h3>
                            <p class="text-gray-600 dark:text-gray-400 mb-4">Register as a healthcare provider to manage appointments, patient information, and your schedule.</p>
                            <button class="px-6 py-2 bg-secondary-500 hover:bg-secondary-600 text-white font-medium rounded-lg transition duration-200">
                                Sign Up as Provider
                            </button>
                        </div>
                    </div>
                </div>

                <div class="text-center">
                    <p class="text-gray-600 dark:text-gray-400">
                        Already have an account?
                        <a href="#" class="text-primary-500 hover:underline font-medium" onclick="navigateTo('login'); return false;">Sign in here</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Patient Registration Page -->
    <div id="register-patient-page" class="page">
        <div class="max-w-4xl mx-auto bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg animate-fade-in">
            <div class="py-6 px-8">
                <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-6">Patient Registration</h2>

                <form id="patient-registration-form">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <!-- First Name -->
                        <div>
                            <label for="patient-first-name" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">First Name</label>
                            <input type="text" id="patient-first-name" name="firstName"
                                   class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                   placeholder="Enter your first name" required>
                        </div>

                        <!-- Last Name -->
                        <div>
                            <label for="patient-last-name" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Last Name</label>
                            <input type="text" id="patient-last-name" name="lastName"
                                   class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                   placeholder="Enter your last name" required>
                        </div>

                        <!-- Email -->
                        <div>
                            <label for="patient-email" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Email Address</label>
                            <input type="email" id="patient-email" name="email"
                                   class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                   placeholder="Enter your email" required>
                        </div>

                        <!-- Phone -->
                        <div>
                            <label for="patient-contact" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Contact Number</label>
                            <input type="tel" id="patient-contact" name="contact"
                                   class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                   placeholder="Enter your phone number">
                        </div>

                        <!-- Password -->
                        <div>
                            <label for="patient-password" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Password</label>
                            <div class="relative">
                                <input type="password" id="patient-password" name="password"
                                       class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                       placeholder="Create a password" required>
                                <button type="button" class="toggle-password absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600 dark:text-gray-400">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 eye-icon" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                                        <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                                    </svg>
                                </button>
                            </div>
                            <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Password must be at least 8 characters long</p>
                        </div>

                        <!-- Confirm Password -->
                        <div>
                            <label for="patient-confirm-password" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Confirm Password</label>
                            <div class="relative">
                                <input type="password" id="patient-confirm-password" name="confirmPassword"
                                       class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                       placeholder="Confirm your password" required>
                                <button type="button" class="toggle-password absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600 dark:text-gray-400">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 eye-icon" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                                        <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Terms and Conditions -->
                    <div class="mb-6">
                        <div class="flex items-center">
                            <input type="checkbox" id="terms" name="terms" class="h-4 w-4 text-primary-500 focus:ring-primary-500 border-gray-300 rounded" required>
                            <label for="terms" class="ml-2 block text-gray-700 dark:text-gray-300">
                                I agree to the <a href="#" class="text-primary-500 hover:underline">Terms of Service</a> and <a href="#" class="text-primary-500 hover:underline">Privacy Policy</a>
                            </label>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="flex justify-between items-center">
                        <button type="button" onclick="navigateTo('register')" class="text-gray-600 dark:text-gray-400 hover:text-primary-500 dark:hover:text-primary-400 font-medium">
                <span class="flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                  </svg>
                  Back
                </span>
                        </button>
                        <button type="submit" class="px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-lg transition duration-200">
                            Create Account
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Doctor Registration Page -->
    <div id="register-doctor-page" class="page">
        <div class="max-w-4xl mx-auto bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg animate-fade-in">
            <div class="py-6 px-8">
                <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-6">Healthcare Provider Registration</h2>

                <form id="doctor-registration-form">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <!-- First Name -->
                        <div>
                            <label for="doctor-first-name" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">First Name</label>
                            <input type="text" id="doctor-first-name" name="firstName"
                                   class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                   placeholder="Enter your first name" required>
                        </div>

                        <!-- Last Name -->
                        <div>
                            <label for="doctor-last-name" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Last Name</label>
                            <input type="text" id="doctor-last-name" name="lastName"
                                   class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                   placeholder="Enter your last name" required>
                        </div>

                        <!-- Email -->
                        <div>
                            <label for="doctor-email" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Email Address</label>
                            <input type="email" id="doctor-email" name="email"
                                   class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                   placeholder="Enter your email" required>
                        </div>

                        <!-- Phone -->
                        <div>
                            <label for="doctor-contact" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Contact Number</label>
                            <input type="tel" id="doctor-contact" name="contact"
                                   class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                   placeholder="Enter your phone number" required>
                        </div>

                        <!-- Specialty -->
                        <div>
                            <label for="doctor-specialty" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Specialty</label>
                            <select id="doctor-specialty" name="specialty"
                                    class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                    required>
                                <option value="" disabled selected>Select your specialty</option>
                                <option value="cardiology">Cardiology</option>
                                <option value="dermatology">Dermatology</option>
                                <option value="endocrinology">Endocrinology</option>
                                <option value="gastroenterology">Gastroenterology</option>
                                <option value="neurology">Neurology</option>
                                <option value="obstetrics">Obstetrics & Gynecology</option>
                                <option value="ophthalmology">Ophthalmology</option>
                                <option value="orthopedics">Orthopedics</option>
                                <option value="pediatrics">Pediatrics</option>
                                <option value="psychiatry">Psychiatry</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <!-- Clinic -->
                        <div>
                            <label for="doctor-clinic" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Clinic/Hospital</label>
                            <input type="text" id="doctor-clinic" name="clinic"
                                   class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                   placeholder="Enter your clinic or hospital name" required>
                        </div>

                        <!-- Qualification -->
                        <div>
                            <label for="doctor-qualification" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Qualification</label>
                            <input type="text" id="doctor-qualification" name="qualification"
                                   class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                   placeholder="E.g., MD, MBBS, MS, etc." required>
                        </div>

                        <!-- Password -->
                        <div>
                            <label for="doctor-password" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Password</label>
                            <div class="relative">
                                <input type="password" id="doctor-password" name="password"
                                       class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                       placeholder="Create a password" required>
                                <button type="button" class="toggle-password absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600 dark:text-gray-400">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 eye-icon" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                                        <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                                    </svg>
                                </button>
                            </div>
                            <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Password must be at least 8 characters long</p>
                        </div>
                    </div>

                    <!-- Bio -->
                    <div class="mb-6">
                        <label for="doctor-bio" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Professional Bio</label>
                        <textarea id="doctor-bio" name="bio" rows="4"
                                  class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                  placeholder="Briefly describe your professional experience and expertise" required></textarea>
                    </div>

                    <!-- Terms and Conditions -->
                    <div class="mb-6">
                        <div class="flex items-center">
                            <input type="checkbox" id="doctor-terms" name="terms" class="h-4 w-4 text-primary-500 focus:ring-primary-500 border-gray-300 rounded" required>
                            <label for="doctor-terms" class="ml-2 block text-gray-700 dark:text-gray-300">
                                I agree to the <a href="#" class="text-primary-500 hover:underline">Terms of Service</a> and <a href="#" class="text-primary-500 hover:underline">Privacy Policy</a>
                            </label>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="flex justify-between items-center">
                        <button type="button" onclick="navigateTo('register')" class="text-gray-600 dark:text-gray-400 hover:text-primary-500 dark:hover:text-primary-400 font-medium">
                <span class="flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                  </svg>
                  Back
                </span>
                        </button>
                        <button type="submit" class="px-6 py-3 bg-secondary-500 hover:bg-secondary-600 text-white font-medium rounded-lg transition duration-200">
                            Create Provider Account
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- OTP Verification Page -->
    <div id="verify-otp-page" class="page">
        <div class="max-w-md mx-auto bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg p-8 animate-fade-in">
            <div class="text-center mb-6">
                <div class="inline-block p-3 rounded-full bg-primary-100 dark:bg-primary-900 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                    </svg>
                </div>
                <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">Verify Your Email</h2>
                <p class="text-gray-600 dark:text-gray-400">We've sent a verification code to your email. Please enter the code below to complete your registration.</p>
            </div>

            <form id="otp-verification-form">
                <input type="hidden" id="verify-email" name="email">

                <div class="mb-6">
                    <label for="otp-code" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Verification Code</label>
                    <input type="text" id="otp-code" name="code"
                           class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white text-center tracking-widest"
                           placeholder="Enter verification code" maxlength="7" required>
                </div>

                <button type="submit" class="w-full bg-primary-500 hover:bg-primary-600 text-white font-bold py-3 px-4 rounded-lg transition duration-200 mb-4">
                    Verify Account
                </button>

                <div class="text-center">
                    <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">
                        Didn't receive the code?
                        <button type="button" id="resend-otp-btn" class="text-primary-500 hover:underline font-medium">Resend Code</button>
                    </p>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">
                        <a href="#" class="text-primary-500 hover:underline" onclick="navigateTo('login'); return false;">Back to Login</a>
                    </p>
                </div>
            </form>
        </div>
    </div>

    <!-- Forgot Password Page -->
    <div id="forgot-password-page" class="page">
        <div class="max-w-md mx-auto bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg p-8 animate-fade-in">
            <div class="text-center mb-6">
                <div class="inline-block p-3 rounded-full bg-primary-100 dark:bg-primary-900 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />
                    </svg>
                </div>
                <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">Forgot Password</h2>
                <p class="text-gray-600 dark:text-gray-400">Enter your email address and we'll send you a link to reset your password.</p>
            </div>

            <form id="forgot-password-form">
                <div class="mb-6">
                    <label for="reset-email" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Email Address</label>
                    <input type="email" id="reset-email" name="email"
                           class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                           placeholder="Enter your email" required>
                </div>

                <button type="submit" class="w-full bg-primary-500 hover:bg-primary-600 text-white font-bold py-3 px-4 rounded-lg transition duration-200 mb-4">
                    Send Reset Link
                </button>

                <div class="text-center">
                    <p class="text-gray-600 dark:text-gray-400 text-sm">
                        Remembered your password?
                        <a href="#" class="text-primary-500 hover:underline" onclick="navigateTo('login'); return false;">Back to Login</a>
                    </p>
                </div>
            </form>
        </div>
    </div>

    <!-- Reset Password Page -->
    <div id="reset-password-page" class="page">
        <div class="max-w-md mx-auto bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg p-8 animate-fade-in">
            <div class="text-center mb-6">
                <div class="inline-block p-3 rounded-full bg-primary-100 dark:bg-primary-900 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                    </svg>
                </div>
                <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">Reset Password</h2>
                <p class="text-gray-600 dark:text-gray-400">Enter the code sent to your email and create a new password.</p>
            </div>

            <form id="reset-password-form">
                <input type="hidden" id="reset-password-email" name="email">

                <div class="mb-4">
                    <label for="reset-code" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Verification Code</label>
                    <input type="text" id="reset-code" name="code"
                           class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                           placeholder="Enter the code from your email" required>
                </div>

                <div class="mb-4">
                    <label for="new-password" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">New Password</label>
                    <div class="relative">
                        <input type="password" id="new-password" name="password"
                               class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                               placeholder="Create a new password" required>
                        <button type="button" class="toggle-password absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600 dark:text-gray-400">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 eye-icon" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                                <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="mb-6">
                    <label for="confirm-new-password" class="block text-gray-700 dark:text-gray-300 font-medium mb-2">Confirm New Password</label>
                    <div class="relative">
                        <input type="password" id="confirm-new-password" name="confirmPassword"
                               class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                               placeholder="Confirm your new password" required>
                        <button type="button" class="toggle-password absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600 dark:text-gray-400">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 eye-icon" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                                <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </div>

                <button type="submit" class="w-full bg-primary-500 hover:bg-primary-600 text-white font-bold py-3 px-4 rounded-lg transition duration-200 mb-4">
                    Reset Password
                </button>
            </form>
        </div>
    </div>

    <!-- Dashboard Page (Placeholder) -->
    <div id="dashboard-page" class="page">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 animate-fade-in">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-4">Welcome to MedLink</h2>
                <p class="text-gray-600 dark:text-gray-400">Your healthcare journey starts here. Manage your appointments, find specialists, and take control of your health.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Upcoming Appointments -->
                <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-xl">
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Upcoming Appointments</h3>
                    </div>
                    <p class="text-gray-600 dark:text-gray-400 mb-4">You have no upcoming appointments.</p>
                    <button class="w-full py-2 px-4 border border-primary-500 text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900 rounded-lg font-medium transition duration-200">
                        Book an Appointment
                    </button>
                </div>

                <!-- Find a Doctor -->
                <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-xl">
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Find a Doctor</h3>
                    </div>
                    <p class="text-gray-600 dark:text-gray-400 mb-4">Search for healthcare providers by specialty or location.</p>
                    <button class="w-full py-2 px-4 bg-primary-500 hover:bg-primary-600 text-white rounded-lg font-medium transition duration-200">
                        Search Doctors
                    </button>
                </div>

                <!-- Medical Records -->
                <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-xl">
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Medical Records</h3>
                    </div>
                    <p class="text-gray-600 dark:text-gray-400 mb-4">Access your medical history and prescription information.</p>
                    <button class="w-full py-2 px-4 border border-primary-500 text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900 rounded-lg font-medium transition duration-200">
                        View Records
                    </button>
                </div>
            </div>

            <div class="mt-8 text-center">
                <button id="logout-btn" class="text-gray-600 dark:text-gray-400 hover:text-primary-500 dark:hover:text-primary-400 font-medium">
            <span class="flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
              </svg>
              Sign Out
            </span>
                </button>
            </div>
        </div>
    </div>
</main>

<script>
    // API BASE URL
    const API_BASE_URL = '/api/v1/auth';

    // Application State
    const appState = {
        currentUser: null,
        currentPage: 'login',
        registrationEmail: null
    };

    // Navigation Function
    function navigateTo(page) {
        // Hide all pages
        document.querySelectorAll('.page').forEach(p => {
            p.classList.remove('active-page');
        });

        // Show the requested page
        const targetPage = document.getElementById(`${page}-page`);
        if (targetPage) {
            targetPage.classList.add('active-page');
            appState.currentPage = page;
            window.scrollTo(0, 0);
        }

        // Update header based on authentication state
        updateHeader();
    }

    // Update header based on authentication state
    function updateHeader() {
        const authButtons = document.getElementById('auth-buttons');
        const userMenu = document.getElementById('user-menu');
        const userName = document.getElementById('user-name');

        if (appState.currentUser) {
            authButtons.classList.add('hidden');
            userMenu.classList.remove('hidden');
            userName.textContent = `${appState.currentUser.firstName} ${appState.currentUser.lastName}`;
        } else {
            authButtons.classList.remove('hidden');
            userMenu.classList.add('hidden');
        }
    }

    // Show toast notification
    function showToast(message, type = 'info') {
        const bgColor = type === 'error' ? '#ef4444' : (type === 'success' ? '#10b981' : '#3b82f6');

        Toastify({
            text: message,
            duration: 3000,
            close: true,
            gravity: "top",
            position: "right",
            backgroundColor: bgColor,
            stopOnFocus: true,
        }).showToast();
    }

    // Show loading state in button
    function setButtonLoading(button, isLoading, originalText) {
        if (isLoading) {
            button.disabled = true;
            const loadingSpinner = `<div class="loading-spinner"></div>`;
            button.innerHTML = loadingSpinner + 'Processing...';
        } else {
            button.disabled = false;
            button.innerHTML = originalText;
        }
    }

    // Toggle password visibility
    document.querySelectorAll('.toggle-password').forEach(button => {
        button.addEventListener('click', function() {
            const passwordInput = this.previousElementSibling;
            const eyeIcon = this.querySelector('.eye-icon');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.innerHTML = '<path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd" /><path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z" />';
            } else {
                passwordInput.type = 'password';
                eyeIcon.innerHTML = '<path d="M10 12a2 2 0 100-4 2 2 0 000 4z" /><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />';
            }
        });
    });

    // Login Form Submission
    document.getElementById('login-form').addEventListener('submit', async function(e) {
        e.preventDefault();

        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        const submitButton = this.querySelector('button[type="submit"]');
        const originalButtonText = submitButton.innerHTML;

        setButtonLoading(submitButton, true);

        try {
            const response = await fetch(`${API_BASE_URL}/login`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email, password })
            });

            const data = await response.json();

            if (!response.ok) {
                throw new Error(data.message || 'Login failed');
            }

            // Store user data and token
            appState.currentUser = data.user;
            localStorage.setItem('token', data.token);
            localStorage.setItem('user', JSON.stringify(data.user));

            showToast('Login successful!', 'success');

            // Navigate to dashboard
            navigateTo('dashboard');
        } catch (error) {
            console.error('Login error:', error);
            showToast(error.message || 'Login failed. Please try again.', 'error');
        } finally {
            setButtonLoading(submitButton, false, originalButtonText);
        }
    });

    // Patient Registration Form Submission
    document.getElementById('patient-registration-form').addEventListener('submit', async function(e) {
        e.preventDefault();

        const firstName = document.getElementById('patient-first-name').value;
        const lastName = document.getElementById('patient-last-name').value;
        const email = document.getElementById('patient-email').value;
        const contact = document.getElementById('patient-contact').value;
        const password = document.getElementById('patient-password').value;
        const confirmPassword = document.getElementById('patient-confirm-password').value;

        if (password !== confirmPassword) {
            showToast('Passwords do not match', 'error');
            return;
        }

        const submitButton = this.querySelector('button[type="submit"]');
        const originalButtonText = submitButton.innerHTML;

        setButtonLoading(submitButton, true);

        try {
            const response = await fetch(`${API_BASE_URL}/signup`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    firstName,
                    lastName,
                    email,
                    password,
                    contact
                })
            });

            const data = await response.json();

            if (!response.ok) {
                throw new Error(data.message || 'Registration failed');
            }

            showToast('Registration successful! Please verify your email.', 'success');

            // Store email for OTP verification
            appState.registrationEmail = email;

            // Set email in OTP verification form
            document.getElementById('verify-email').value = email;

            // Navigate to OTP verification page
            navigateTo('verify-otp');
        } catch (error) {
            console.error('Registration error:', error);
            showToast(error.message || 'Registration failed. Please try again.', 'error');
        } finally {
            setButtonLoading(submitButton, false, originalButtonText);
        }
    });

    // Doctor Registration Form Submission
    document.getElementById('doctor-registration-form').addEventListener('submit', async function(e) {
        e.preventDefault();

        const firstName = document.getElementById('doctor-first-name').value;
        const lastName = document.getElementById('doctor-last-name').value;
        const email = document.getElementById('doctor-email').value;
        const contact = document.getElementById('doctor-contact').value;
        const specialty = document.getElementById('doctor-specialty').value;
        const clinic = document.getElementById('doctor-clinic').value;
        const qualification = document.getElementById('doctor-qualification').value;
        const bio = document.getElementById('doctor-bio').value;
        const password = document.getElementById('doctor-password').value;

        const submitButton = this.querySelector('button[type="submit"]');
        const originalButtonText = submitButton.innerHTML;

        setButtonLoading(submitButton, true);

        try {
            const response = await fetch(`${API_BASE_URL}/signup-doc`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    firstName,
                    lastName,
                    email,
                    password,
                    contact,
                    clinic,
                    specialty,
                    qualification,
                    bio
                })
            });

            const data = await response.json();

            if (!response.ok) {
                throw new Error(data.message || 'Registration failed');
            }

            showToast('Registration successful! Please verify your email.', 'success');

            // Store email for OTP verification
            appState.registrationEmail = email;

            // Set email in OTP verification form
            document.getElementById('verify-email').value = email;

            // Navigate to OTP verification page
            navigateTo('verify-otp');
        } catch (error) {
            console.error('Registration error:', error);
            showToast(error.message || 'Registration failed. Please try again.', 'error');
        } finally {
            setButtonLoading(submitButton, false, originalButtonText);
        }
    });

    // OTP Verification Form Submission
    document.getElementById('otp-verification-form').addEventListener('submit', async function(e) {
        e.preventDefault();

        const email = document.getElementById('verify-email').value;
        const code = document.getElementById('otp-code').value;

        const submitButton = this.querySelector('button[type="submit"]');
        const originalButtonText = submitButton.innerHTML;

        setButtonLoading(submitButton, true);

        try {
            const response = await fetch(`${API_BASE_URL}/verify-otp`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email, code })
            });

            const data = await response.json();

            if (!response.ok) {
                throw new Error(data.message || 'Verification failed');
            }

            showToast('Account verified successfully!', 'success');

            // Navigate to login page
            navigateTo('login');
        } catch (error) {
            console.error('Verification error:', error);
            showToast(error.message || 'Verification failed. Please try again.', 'error');
        } finally {
            setButtonLoading(submitButton, false, originalButtonText);
        }
    });

    // Resend OTP Button Click
    document.getElementById('resend-otp-btn').addEventListener('click', async function() {
        const email = document.getElementById('verify-email').value;

        if (!email) {
            showToast('Email is required', 'error');
            return;
        }

        const originalButtonText = this.innerHTML;
        this.disabled = true;
        this.innerHTML = 'Sending...';

        try {
            const response = await fetch(`${API_BASE_URL}/resend-otp`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email, type: 'create' })
            });

            const data = await response.json();

            if (!response.ok) {
                throw new Error(data.message || 'Failed to resend OTP');
            }

            showToast('Verification code resent successfully!', 'success');
        } catch (error) {
            console.error('Resend OTP error:', error);
            showToast(error.message || 'Failed to resend OTP. Please try again.', 'error');
        } finally {
            this.disabled = false;
            this.innerHTML = originalButtonText;
        }
    });

    // Forgot Password Form Submission
    document.getElementById('forgot-password-form').addEventListener('submit', async function(e) {
        e.preventDefault();

        const email = document.getElementById('reset-email').value;

        const submitButton = this.querySelector('button[type="submit"]');
        const originalButtonText = submitButton.innerHTML;

        setButtonLoading(submitButton, true);

        try {
            const response = await fetch(`${API_BASE_URL}/request-password-reset`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email })
            });

            const data = await response.json();

            if (!response.ok) {
                throw new Error(data.message || 'Failed to send reset link');
            }

            showToast('Password reset code sent to your email!', 'success');

            // Set email in reset password form
            document.getElementById('reset-password-email').value = email;

            // Navigate to reset password page
            navigateTo('reset-password');
        } catch (error) {
            console.error('Forgot password error:', error);
            showToast(error.message || 'Failed to send reset link. Please try again.', 'error');
        } finally {
            setButtonLoading(submitButton, false, originalButtonText);
        }
    });

    // Reset Password Form Submission
    document.getElementById('reset-password-form').addEventListener('submit', async function(e) {
        e.preventDefault();

        const email = document.getElementById('reset-password-email').value;
        const code = document.getElementById('reset-code').value;
        const password = document.getElementById('new-password').value;
        const confirmPassword = document.getElementById('confirm-new-password').value;

        if (password !== confirmPassword) {
            showToast('Passwords do not match', 'error');
            return;
        }

        const submitButton = this.querySelector('button[type="submit"]');
        const originalButtonText = submitButton.innerHTML;

        setButtonLoading(submitButton, true);

        try {
            const response = await fetch(`${API_BASE_URL}/reset-password`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    email,
                    code,
                    password,
                    confirmPassword
                })
            });

            const data = await response.json();

            if (!response.ok) {
                throw new Error(data.message || 'Failed to reset password');
            }

            showToast('Password reset successful!', 'success');

            // Navigate to login page
            navigateTo('login');
        } catch (error) {
            console.error('Reset password error:', error);
            showToast(error.message || 'Failed to reset password. Please try again.', 'error');
        } finally {
            setButtonLoading(submitButton, false, originalButtonText);
        }
    });

    // Logout Button Click
    document.getElementById('logout-btn').addEventListener('click', function() {
        // Clear local storage
        localStorage.removeItem('token');
        localStorage.removeItem('user');

        // Clear app state
        appState.currentUser = null;

        // Show toast
        showToast('Logged out successfully', 'success');

        // Navigate to login page
        navigateTo('login');
    });

    // Check for existing user session on load
    document.addEventListener('DOMContentLoaded', function() {
        const token = localStorage.getItem('token');
        const user = localStorage.getItem('user');

        if (token && user) {
            try {
                appState.currentUser = JSON.parse(user);
                navigateTo('dashboard');
            } catch (e) {
                console.error('Failed to parse user data:', e);
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                navigateTo('login');
            }
        } else {
            navigateTo('login');
        }
    });

    // Logo click handler
    document.getElementById('logo').addEventListener('click', function() {
        if (appState.currentUser) {
            navigateTo('dashboard');
        } else {
            navigateTo('login');
        }
    });
</script>
</body>
</html>